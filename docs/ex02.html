<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />




<title>Exercise 2</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>




<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="html-md-01.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<div class="container-fluid main-container">

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->





<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Geographic Data Analysis</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="overview.html">Overview</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Topics
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Lecture topics</li>
    <li>
      <a href="lec01.html">Introduction to the course</a>
    </li>
    <li>
      <a href="lec02.html">Univariate plots</a>
    </li>
    <li>
      <a href="lec03.html">Bivariate plots</a>
    </li>
    <li>
      <a href="lec04.html">Descriptive statistics</a>
    </li>
    <li>
      <a href="lec05.html">Multivariate plots</a>
    </li>
    <li>
      <a href="lec06.html">Maps in R</a>
    </li>
    <li>
      <a href="lec07.html">Geospatial analysis in R</a>
    </li>
    <li>
      <a href="lec08.html">Data wrangling and matrix algebra</a>
    </li>
    <li>
      <a href="lec09.html">Reference distributions</a>
    </li>
    <li>
      <a href="lec10.html">Statistical inference</a>
    </li>
    <li>
      <a href="lec11.html">Analysis of variance</a>
    </li>
    <li>
      <a href="lec12.html">Regression analysis</a>
    </li>
    <li>
      <a href="lec13.html">More regression analysis</a>
    </li>
    <li>
      <a href="lec14.html">Nonparametric regression</a>
    </li>
    <li>
      <a href="lec15.html">GLMs, GAMs, and CARTs</a>
    </li>
    <li>
      <a href="lec16.html">Principal components and factor analyses</a>
    </li>
    <li>
      <a href="lec17.html">MANOVA and discriminant analysis</a>
    </li>
    <li>
      <a href="lec18.html">Multivariate distances and cluster analysis</a>
    </li>
    <li>
      <a href="lec19.html">High-resolution and high-dimension data</a>
    </li>
    <li>
      <a href="lec20.html">Analysis and visualization of large raster data sets</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Exercises &amp; Exams
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li class="dropdown-header">Exercises</li>
    <li>
      <a href="ex01.html">Exercise 01 -- Getting R and RStudio</a>
    </li>
    <li>
      <a href="ex02.html">Exercise 02 -- Univariate plots</a>
    </li>
    <li>
      <a href="ex03.html">Exercise 03 -- Bivariate plots and descriptive statistics</a>
    </li>
    <li>
      <a href="ex04.html">Exercise 04 -- Multivariate plots</a>
    </li>
    <li>
      <a href="ex05.html">Exercise 05 -- Data wrangling and matrix algebra</a>
    </li>
    <li>
      <a href="ex06.html">Exercise 06 -- CI's, t-tests, ANOVA</a>
    </li>
    <li>
      <a href="ex07.html">Exercise 07 -- Regression analysis</a>
    </li>
    <li>
      <a href="ex08.html">Exercise 08 -- Multivariate analysis</a>
    </li>
    <li class="dropdown-header">Exams</li>
    <li>
      <a href="exam1.html">Exam 1</a>
    </li>
    <li>
      <a href="exam2.html">Exam 2</a>
    </li>
    <li class="dropdown-header">Other materials</li>
    <li>
      <a href="packages-and-data.html">Packages and Data</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Resources
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="readings.html">Readings</a>
    </li>
    <li>
      <a href="oldpages.html">Old course web pages</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="about.html">About</a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Exercise 2</h1>

</div>


<p><strong>Geography 4/595: Geographic Data Analysis</strong><br />
<strong>Winter 2019</strong></p>
<p><strong>Exercise 2: Univariate Plots</strong><br />
<strong>Finish by Monday, January 21</strong></p>
<p>The objective of this exercise is to demonstrate some of the basic univariate plots for displaying data. This exercise will not involve much manipulation of R code; the individual “commands” (text in this font) can be easily copied and pasted into the R Console window.</p>
<p><strong>Read through the exercise before attempting to complete it.</strong></p>
<p><strong>1. Univariate scatter plot (scatter diagrams) –</strong> <code>plot()</code> <strong>version</strong></p>
<p>The univariate “scatter diagram” is a very simple plot of the values of a variable, plotted vs the observation number, or row number in a rectangular data set (labeled “Index” on the plot). (Ordinary scatter diagrams or scatterplots will be described later.) As it happens, in this data set the observations are arranged in downstream order, so there actually is some meaning to the observation number. That won’t always be the case, however.</p>
<p>Start R by browsing to the <code>R.Rproj</code> file that was created by the New Project dialog in Exercise 1, and clicking on it. Or start R, and then use the File &gt; Open project… dialog.</p>
<p>Check to see if the “<code>sumcr</code>” data set (“data frame”) is still in your workspace using the <code>ls()</code> or “list” function:</p>
<pre><code>ls()  </code></pre>
<p>If not, read it into your working directory again as in Exercise 1 (here’s a link <a href="https://pjbartlein.github.io/GeogDataAnalysis/data/csv/sumcr.csv">[sumcr.csv]</a>). You can find the working directory after starting R by typing</p>
<pre><code>getwd()</code></pre>
<p>You can quickly change the working directory as follows:</p>
<ul>
<li>Windows: File &gt; Change dir… &gt; then browse to the folder.</li>
<li>Mac OS X: Misc &gt; Change Working Directory… then browse to the folder.</li>
<li>RStudio: Session &gt; Set Working Directory &gt; Choose Directory… then browse to the folder.</li>
</ul>
<p>Next, to make it easy to refer to individual variables (by their simple names (e.g. <code>WidthWS</code>) as opposed to their full or compound names (“<code>sumcr$WidthWS</code>”, i.e. <code>dataframe$variable</code>), use the <code>attach()</code> function:</p>
<pre><code>attach(sumcr)</code></pre>
<p>To create a univariate scatter diagram for the variable “<code>Length</code>”, type</p>
<pre><code>plot(Length)</code></pre>
<blockquote>
<p>Q1: What is the typical length of a hydrologic unit along Summit Cr.? What is the shortest, and what is the longest? What is the range of hydrologic unit lengths (difference between the smallest and largest)? (Just “eyeball” the graph to get these answers.)</p>
</blockquote>
<p>Note that there is no information lost in this display. The original values of the variables, and even the order of the observations, could be reconstructed using a ruler.</p>
<p>It’s sometimes helpful to be able to return to previously generated plots. The obvious way to do that is to just reissue the commands again, but the individual plots can also be saved. Using Windows, after creating a plot, make sure the RGraphics window is active (by clicking on it), and then use the RGui History &gt; Recording menu to turn recording on. On the Mac, the Quartz window has history turned on by default. Subsequent plots will then be added, and can be viewed again by using the PgUp and PgDn keys on Windows, or Command-left arrow on the Mac, when the RGraphics window is active.</p>
<p><strong>2. Univariate scatter Diagram –</strong> <code>stripchart()</code> <strong>version</strong></p>
<p>(This plot is also known as a “strip plot” or “dot plot”.) Type the following</p>
<pre><code>stripchart(Length) </code></pre>
<p>Here’s an alternative version with the points with identical values “stacked”:</p>
<pre><code>stripchart(Length, method=&quot;stack&quot;)</code></pre>
<blockquote>
<p>Q2: Describe what this plot looks like, in comparison with the first one for length. Has any information been lost? Is there any particular pattern to the points in this plot? Was that pattern also evident on the first plot?</p>
</blockquote>
<p>The two plots each have one point for each observation, and each point is plotted using the particular value of Length, but each gives a slightly different view of the data. That’s actually a desirable situation because one view may allow you to see a pattern that is not evident in the other view.</p>
<p><strong>3. Dotplots (</strong><code>dotcharts</code><strong>)</strong></p>
<p>Another way to examine a single variable and gain some insight into its variations across the observations in a data is through Cleveland’s dotplots (called “<code>dotchart</code>” in R). In the simple version here, the plot again shows individual observations. By default, the observations are arranged in the row-order of the data frame (i.e. first observation on the bottom of the plot, last on the top). Try</p>
<pre><code>dotchart(WidthWS)</code></pre>
<p>Here’s an alternative, this time with each line labeled by the Location variable</p>
<pre><code>dotchart(WidthWS, labels=as.character(Location), cex=0.5)</code></pre>
<p>The <code>as.character()</code> function converts the Location variable back to a character string (it was read in as a factor by the <code>read.csv(</code>) function. The <code>cex=0.5</code> parameter makes the characters smaller for legibility.</p>
<p>Here’s a version in which the observations are sorted by the values of <code>WidthWS</code>. The creation of an index using the order() function is used to rearrange the the values of <code>WidthWS</code> and the corresponding values of the Location character-string label:</p>
<pre><code>index &lt;- order(WidthWS)
dotchart(WidthWS[index], labels=as.character(Location[index]), cex=0.5)</code></pre>
<p><strong>4. Boxplots</strong></p>
<p>A <em>boxplot</em> contains a object (a box) and some decorations (lines, etc.) that are drawn to illustrate certain aspects of a variable. The box is drawn in such a way that the box itself encloses half of the data points. The top edge of the box is drawn so that 1/4 of the observations have values greater than that value, the bottom edge is drawn so that 1/4 of the observations have values that are less than that value, and the line in the middle of the box is drawn so that half of the observations have values greater than its value and half have values less than its value (i.e., at the median). The other parts of the box plot will be discussed in class. Try</p>
<pre><code>boxplot(Length)</code></pre>
<p>(the “whiskers”, by default, extend to 1.5 times the interquartile range). Here’s an alternative version where the “whiskers” of the plot extend to the extremes of the data:</p>
<pre><code>boxplot(Length, range=0)</code></pre>
<blockquote>
<p>Q3: What does the boxplot look like? Compare it to the univariate scatter diagram and strip plot for Length. Does the boxplot provide more information, less information, or different information than the other plots?</p>
</blockquote>
<p>At this point we’re done with the Summit Cr. data set, and so it’s a good practice to “<code>detach</code>” using the <code>detach()</code> function. This removes the shorthand way of referring to the variables in that data frame, which will avoid possible collisions with the variables in another data frame that might be read in that could have variables with the same names as those in the Summit Cr. data frame–a data frame from another study site for example. <code>detach()</code> doesn’t remove the data frame from the workspace, which you can verify using the <code>ls()</code> function. To detach the <code>sumcr</code> data frame, type</p>
<pre><code>detach(sumcr)</code></pre>
<p><strong>5. Histograms</strong></p>
<p>A <em>histogram</em> essentially is a bar chart of a frequency table, where the heights of the bars reflect the relative (or absolute) proportion of observations that fall within particular class intervals of the variable of interest. The s!hape of the histogram reveals the distribution of the individual observations.</p>
<p>Open Alec Murphy’s Scandinavian EU voter-preference data. The data include the name of the commune (or county) (<code>District</code>), the percentage of Yes votes (<code>Yes</code>), the population of each commune (<code>Pop</code>), and a country code (<code>Country</code>). Here’s a link to the .csv file: <a href="https://pjbartlein.github.io/GeogDataAnalysis/data/csv/scanvote.csv">[scanvote.csv]</a>. Download it and save it in your working directory.</p>
<p>The command to read the .csv file is a little different than was used for reading the Summit Cr. data:</p>
<pre><code>scanvote &lt;- read.csv(&quot;scanvote.csv&quot;, as.is=1)</code></pre>
<p>The <code>as.is=1</code> parameter prevents R from turning the commune name (<code>District</code>) in column 1 into a “factor” (like <code>Country</code>), leaving it as a text label.</p>
<p>Here’s the alternative approach using <code>file.choose()</code></p>
<pre><code>scanvote &lt;- read.csv(file.choose(), as.is=1)</code></pre>
<p>The nature of the individual variables in a data frame, i.e., whether they are continuous numeric variables “factors” that indicate group membership, or character-string labels can be seen using the <code>str()</code> function, which shows the “structure” of the data frame, and also prints out a little data:</p>
<pre><code>str(scanvote)</code></pre>
<p>The listing produced should indicate that the District variable is a character string (chr), Yes and Pop are numerical variables, and Country is a factor.</p>
<p>Attach the data frame by typing <code>attach(scanvote)</code>:</p>
<pre><code>attach(scanvote)</code></pre>
<p>Now, get histograms for the variable “Yes” (the proportion of voters in each commune (county) expressing a positive preference for joining the EU. To get a basic histogram, type</p>
<pre><code>hist(Yes)</code></pre>
<blockquote>
<p>Q4: Describe the distribution of Yes. What range of values occur the most frequently? What is the overall range of Yes values in the data set (looking at the figure)?</p>
</blockquote>
<blockquote>
<p>Q5: Produce a stripchart of the Yes votes using the <code>stripchart()</code> function described above. How well does each plot type describe the distribution of the Yes values. (You don’t really have to answer this–it’s easy to see but hard to say, but give it a shot.)</p>
</blockquote>
<p>Experiment with the number of bars in the histogram: Type the following:</p>
<pre><code>hist(Yes, breaks=20)</code></pre>
<blockquote>
<p>Q6: Describe what the histogram looks like now. How does the shape of the histogram change as the number of bars increases? What does it look like if <code>breaks=40</code>?</p>
</blockquote>
<p><strong>6. Density Plots</strong></p>
<p>Evidently, the shape of the histogram (and consequently what it may imply about the distribution of the data) can vary considerably depending on the bin widths that are used to summarize the data or the number of bars (bins) used. An alternative plot type is the “kernel density smoother plot” This plot is produced by first using the <code>density()</code> function to estimate the number of data points in the vicinity of different values of the Yes percents, and then plotting these. To produce the plot, type the following two lines at the command prompt:</p>
<pre><code>Yes.density &lt;- density(Yes)
plot(Yes.density)</code></pre>
<blockquote>
<p>Q7: Describe the different views that the histogram and density lines give of the data. Which view seems less dependent on the particular way the plot is generated? Which view loses the least information about the individual values of the variable?</p>
</blockquote>
<p><strong>7. A composite plot</strong></p>
<p>The views of the data provided by the different plotting methods vary quite a bit. Some retain a lot of information, but may be hard to interpret (particularly if there are a lot of data), while others are very simple appearing, but lose information. One strategy for dealing with this is to produce a plot that superimposes several different plots. Type the following, one line at a time:</p>
<pre><code>Yes.density &lt;- density(Yes)
hist(Yes, breaks=20, probability=TRUE)
lines(Yes.density)
rug(Yes)</code></pre>
<blockquote>
<p>Q8: What does the resulting plot contain? What does the <code>rug()</code> function apparently do? Does this plot offer any advantages over the individual plots, or is too cluttered?</p>
</blockquote>
<p><strong>8. What to hand in</strong></p>
<p>Answers to the eight questions. Do not go overboard—all of them should fit on a single typed page.</p>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
